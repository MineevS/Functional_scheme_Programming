<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QEvalDerivSys: README</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QEvalDerivSys<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Система вычисления производных</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p align="center"></p>
<p><img src="../.././doc/ScreenShot.jpg" alt="" width="100%" class="inline"/> </p>
<h1><a class="anchor" id="autotoc_md0"></a>
MathExpressions</h1>
<p><b>MathExpressions</b> небольшая C++ библиотека для отрисовки математических формул с использованием фрэймворка Qt. Изначально она была написана на Pascal(Delphi 5) Григорьевым Антоном и называлась <a href="https://github.com/Aleksandr185/ExprDraw"><b>ExprDraw</b></a>.</p>
<p>Библиотека содержит классы, позволяющие отображать любые математические формулы. Базовым классом для всех классов библиотеки является <b>AbstractExpression</b>. Для отображения выражения необходимо построить дерево выражения, узлами и листьями которого являются экземпляры класса <b>AbstractExpression</b>. Так, например, для отображения простой дроби используется класс <b>FractionExpression</b>, имеющий две ветви: для числителя и знаменателя. Сами ветви также могут быть составными. Класс <b>AbstractExpression</b> сообщает свои геометрические размеры, координаты надстрочных и подстрочных символов, шрифт и цвет выражения, а также содержит указатель на своего родителя и на следующее выражение в цепочке. Геометрические размеры могут быть расчитаны только после установки шрифта и указателя на <b>QPaintDevice</b>. При установки шрифта или цвета, эти параметры передаются всем узлам далее по цепочке. Если цвет для узла не задан, используется цвет родителя, если родителя нет используется чёрный цвет.</p>
<p>Отображение выражения осуществляется с помощью функции <b>draw</b>. В качестве параметров ей передаются координаты вывода выражения и флаги выравнивания относительно этих координат.</p>
<p>Выражения можно формировать программно или использовать класс <b>ExpressionBuilder</b>. Функция <b>ExpressionBuilder::exec</b> в качестве аргумента принимает строку, которая содержит описание математического выражения. Если в процессе построения выражения возникает ошибка, функция вернет частично построенное выражение, а с помощью <b>ExpressionBuilder::lastError</b> можно узнать описание ошибки. Функция <b>ExpressionBuilder::exec</b> никогда не возвращает нулевой указатель. Полная справка по синтаксису выражений для <b>ExpressionBuilder</b> находится проекте <b>demo</b>.</p>
<p>Функции <b>AbstractExpression::multiplicationFlags()</b>, <b>AbstractExpression::isArgNeedBrackets()</b>, <b>AbstractExpression::isNeedBrackets()</b> используются только классом <b>ExpressionBuilder</b>.</p>
<p><b>AbstractExpression::multiplicationFlags()</b> возвращает комбинацию флагов <b>MultiplicationFlag</b>, которые используются при перемножении символом '*'. Данные флаги показывают:</p><ul>
<li><b>MultiplicationFlag::Left</b> - выражение может быть умножено без знака слева;</li>
<li><b>MultiplicationFlag::Right</b> - выражение может быть умножено без знака справа;</li>
<li><b>MultiplicationFlag::Negative</b> - выражение является отрицательным;</li>
<li><b>MultiplicationFlag::Number</b> - выражение является числом;</li>
<li><b>MultiplicationFlag::Brackets</b> - выражение содержит любые скобки;</li>
<li><b>MultiplicationFlag::RoundBrackets</b> - выражение содержит круглые скобки.</li>
</ul>
<p><b>AbstractExpression::isArgNeedBrackets()</b> возвращает <b>true</b>, если при использовании данного выражения в качестве имени функции (см. класс <b>CommonFunctionExpression</b>) аргумент должен заключаться в скобки.</p>
<p><b>AbstractExpression::isNeedBrackets()</b> возвращает <b>true</b>, если появление данного выражения в цепочке выражений вызывает необходимость заключения данной цепочки в скобки при умножении её на другое выражене.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Примеры программного формирования выражений.</h2>
<h4><a class="anchor" id="autotoc_md2"></a>
Пример 1:</h4>
<p>Выражение:</p>
<p><img src="../.././doc/exemple_1.jpg" alt="" width="15%" class="inline"/> </p>
<div class="fragment"><div class="line">++</div>
<div class="line"> <span class="keyword">using namespace </span>MathExpressions;</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;a&#39;</span>);</div>
<div class="line"> expr-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d6/d09/classMathExpressions_1_1SignExpression.html">SignExpression</a>(SignExpression::SignType::Plus));</div>
<div class="line"> expr-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;b&#39;</span>));</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> fraction = <span class="keyword">new</span> <a class="code hl_class" href="../../d7/db9/classMathExpressions_1_1FractionExpression.html">FractionExpression</a>( <span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;c&#39;</span>),</div>
<div class="line">                                                  <span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;d&#39;</span>));</div>
<div class="line"> fraction-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d6/d09/classMathExpressions_1_1SignExpression.html">SignExpression</a>(SignExpression::SignType::Plus));</div>
<div class="line"> fraction-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d9/d99/classMathExpressions_1_1NumberExpression.html">NumberExpression</a>(1));</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> brackets = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/dad/classMathExpressions_1_1BracketedExpression.html">BracketedExpression</a>(fraction,</div>
<div class="line">                                                  BracketedExpression::BracketStyle::Round);</div>
<div class="line"> expr-&gt;addNext(brackets);</div>
<div class="line"> expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/d95/classMathExpressions_1_1ChainExpression.html">ChainExpression</a>(expr);</div>
<div class="ttc" id="aclassMathExpressions_1_1AbstractExpression_html"><div class="ttname"><a href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">MathExpressions::AbstractExpression</a></div><div class="ttdef"><b>Definition</b> abstract_expression.h:22</div></div>
<div class="ttc" id="aclassMathExpressions_1_1BracketedExpression_html"><div class="ttname"><a href="../../d9/dad/classMathExpressions_1_1BracketedExpression.html">MathExpressions::BracketedExpression</a></div><div class="ttdef"><b>Definition</b> bracketed_expression.h:9</div></div>
<div class="ttc" id="aclassMathExpressions_1_1ChainExpression_html"><div class="ttname"><a href="../../d9/d95/classMathExpressions_1_1ChainExpression.html">MathExpressions::ChainExpression</a></div><div class="ttdef"><b>Definition</b> chain_expression.h:9</div></div>
<div class="ttc" id="aclassMathExpressions_1_1FractionExpression_html"><div class="ttname"><a href="../../d7/db9/classMathExpressions_1_1FractionExpression.html">MathExpressions::FractionExpression</a></div><div class="ttdef"><b>Definition</b> fraction_expression.h:9</div></div>
<div class="ttc" id="aclassMathExpressions_1_1NumberExpression_html"><div class="ttname"><a href="../../d9/d99/classMathExpressions_1_1NumberExpression.html">MathExpressions::NumberExpression</a></div><div class="ttdef"><b>Definition</b> number_expresssion.h:11</div></div>
<div class="ttc" id="aclassMathExpressions_1_1SignExpression_html"><div class="ttname"><a href="../../d6/d09/classMathExpressions_1_1SignExpression.html">MathExpressions::SignExpression</a></div><div class="ttdef"><b>Definition</b> sign_expression.h:9</div></div>
<div class="ttc" id="aclassMathExpressions_1_1VariableExpression_html"><div class="ttname"><a href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">MathExpressions::VariableExpression</a></div><div class="ttdef"><b>Definition</b> variable_expression.h:9</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md3"></a>
Пример 2:</h4>
<p>Выражение:</p>
<p><img src="../.././doc/exemple_2.jpg" alt="" width="15%" class="inline"/> </p>
<div class="fragment"><div class="line">++</div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> radical_expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;x&#39;</span>);</div>
<div class="line"> radical_expr-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d6/d09/classMathExpressions_1_1SignExpression.html">SignExpression</a>(SignExpression::SignType::Minus));</div>
<div class="line"> radical_expr-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d9/d99/classMathExpressions_1_1NumberExpression.html">NumberExpression</a>(1));</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> root_expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d8/dbc/classMathExpressions_1_1RootExpression.html">RootExpression</a>(<span class="keyword">new</span> <a class="code hl_class" href="../../d9/d95/classMathExpressions_1_1ChainExpression.html">ChainExpression</a>(radical_expr),</div>
<div class="line">                                              <span class="keyword">new</span> <a class="code hl_class" href="../../d9/d99/classMathExpressions_1_1NumberExpression.html">NumberExpression</a>(3));</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_class" href="../../d2/d9e/classMathExpressions_1_1AbstractExpression.html">ExpressionPtr</a> expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d8/d1e/classMathExpressions_1_1VariableExpression.html">VariableExpression</a>(<span class="charliteral">&#39;y&#39;</span>);</div>
<div class="line"> expr-&gt;addNext(<span class="keyword">new</span> <a class="code hl_class" href="../../d6/d09/classMathExpressions_1_1SignExpression.html">SignExpression</a>(SignExpression::SignType::Equals));</div>
<div class="line"> expr-&gt;addNext(root_expr);</div>
<div class="line"> expr = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/d95/classMathExpressions_1_1ChainExpression.html">ChainExpression</a>(expr);</div>
<div class="ttc" id="aclassMathExpressions_1_1RootExpression_html"><div class="ttname"><a href="../../d8/dbc/classMathExpressions_1_1RootExpression.html">MathExpressions::RootExpression</a></div><div class="ttdef"><b>Definition</b> root_expression.h:9</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Примеры формирования выражений с помощью класс ExpressionBuilder.</h2>
<h4><a class="anchor" id="autotoc_md5"></a>
Пример 1:</h4>
<p>Выражение:</p>
<p><img src="../.././doc/exemple_1.jpg" alt="" width="15%" class="inline"/> </p>
<div class="fragment"><div class="line">++</div>
<div class="line"> <a class="code hl_class" href="../../d0/df0/classMathExpressions_1_1ExpressionBuilder.html">ExpressionBuilder</a> builder;</div>
<div class="line"> ExpressionUniquePtr expr = builder.exec(<span class="stringliteral">&quot;a+b*(c/d+1)&quot;</span>);</div>
<div class="ttc" id="aclassMathExpressions_1_1ExpressionBuilder_html"><div class="ttname"><a href="../../d0/df0/classMathExpressions_1_1ExpressionBuilder.html">MathExpressions::ExpressionBuilder</a></div><div class="ttdef"><b>Definition</b> expression_builder.h:33</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md6"></a>
Пример 2:</h4>
<p>Выражение:</p>
<p><img src="../.././doc/exemple_2.jpg" alt="" width="15%" class="inline"/> </p>
<div class="fragment"><div class="line">++</div>
<div class="line"> <a class="code hl_class" href="../../d0/df0/classMathExpressions_1_1ExpressionBuilder.html">ExpressionBuilder</a> builder;</div>
<div class="line"> ExpressionUniquePtr expr = builder.exec(<span class="stringliteral">&quot;y=root(3, x-1)&quot;</span>);</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md7"></a>
Иерархия классов</h2>
<div class="fragment"><div class="line">AbstractExpression</div>
<div class="line">|-AbstractParentExpression</div>
<div class="line">| |-AbstractBigParentExpression</div>
<div class="line">| | |-FractionExpression</div>
<div class="line">| | |-RootExpression</div>
<div class="line">| | |-AtValueExpression</div>
<div class="line">| | |-CommonFunctionExpression</div>
<div class="line">| |   |-FunctionExpression</div>
<div class="line">| |-ChainExpression</div>
<div class="line">| | |-BracketedExpression</div>
<div class="line">| |   |-RoundBracketedExpression</div>
<div class="line">| |   |-ArgumentExpression</div>
<div class="line">| |   |-BaseExpression</div>
<div class="line">| |-AbstractTwinParentExpression</div>
<div class="line">| | |-IndexExpression</div>
<div class="line">| | |-GroupExpression</div>
<div class="line">| |   |-SummaExpression</div>
<div class="line">| |   |-ProductExpression</div>
<div class="line">| |   |-CirculationExpression</div>
<div class="line">| |   |-IntegralExpression</div>
<div class="line">| |-LimitExpression</div>
<div class="line">| |-CapExpression</div>
<div class="line">| |-StandExpression</div>
<div class="line">| |-MatrixExpression</div>
<div class="line">| |-CaseExpression</div>
<div class="line">| |-FrameExpression</div>
<div class="line">|-SimpleExpression</div>
<div class="line">| |-VariableExpression</div>
<div class="line">| |-CustomTextExpression</div>
<div class="line">| |-FunctionNameExpression</div>
<div class="line">| |-AsterixExpression</div>
<div class="line">|-NumberExpression</div>
<div class="line">| |-ExtendedNumberExpresssion</div>
<div class="line">|-CharacterExpression</div>
<div class="line">| |-PlanckExpression</div>
<div class="line">| |-SignExpression</div>
<div class="line">| |-CommaExpression</div>
<div class="line">| |-LambdaExpression</div>
<div class="line">|-SpaceExpression</div>
<div class="line">|-StrokesExpression</div>
<div class="line">|-EmptyExpression</div>
<div class="line">|-NullExpression</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
