\doxysection{QTelnet.\+h}
\hypertarget{QTelnet_8h_source}{}\label{QTelnet_8h_source}\index{/home/msa/Documents/QPROJECTS/QEvalDeriv/QEvalDerivSys/frontend/components/widgets/QTelnet/QTelnet.h@{/home/msa/Documents/QPROJECTS/QEvalDeriv/QEvalDerivSys/frontend/components/widgets/QTelnet/QTelnet.h}}
\mbox{\hyperlink{QTelnet_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ QTELNET\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ QTELNET\_H}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <QObject>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <qtcpsocket.h>}\ \textcolor{comment}{//\ add\ in\ .pro\ network.}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <qsize.h>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <QString>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ IncommingBufferSize\ (1500)}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classQTelnet}{QTelnet}}\ :\ \textcolor{keyword}{public}\ QTcpSocket}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ Q\_OBJECT}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{enum}\ SocketStatus}
\DoxyCodeLine{00027\ \ \ \ \ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ Disconnected,}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ Resolving,\ \ \ \ \ \ \textcolor{comment}{//\ Resolving\ host}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ Connecting,\ \ \ \ \ \textcolor{comment}{//\ Connecting\ to\ host.}}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ Connected\ \ \ \ \ \ \ \textcolor{comment}{//\ Connected\ to\ host.}}
\DoxyCodeLine{00032\ \ \ \ \ \};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{enum}\ TelnetStateCodes}
\DoxyCodeLine{00036\ \ \ \ \ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ STATE\_DATA\ \ \ \ \ \ \ \ \ \ =\ (char)0,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ STATE\_IAC\ \ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})1,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ STATE\_IACSB\ \ \ \ \ \ \ \ \ =\ (char)2,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ STATE\_IACWILL\ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})3,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ STATE\_IACDO\ \ \ \ \ \ \ \ \ =\ (char)4,}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ STATE\_IACWONT\ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})5,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ STATE\_IACDONT\ \ \ \ \ \ \ =\ (char)6,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ STATE\_IACSBIAC\ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})7,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ STATE\_IACSBDATA\ \ \ \ \ =\ (char)8,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ STATE\_IACSBDATAIAC\ \ =\ (\textcolor{keywordtype}{char})9,}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ STATE\_DATAR\ \ \ \ \ \ \ \ \ =\ (char)10,}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ STATE\_DATAN\ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})11}
\DoxyCodeLine{00049\ \ \ \ \ \};}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{enum}\ TelnetCodes}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Negociación\ entrada/salida\ (cliente<-\/>servidor)}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ IAC\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (char)255,\ \ \textcolor{comment}{//\ Inicia\ la\ secuencia\ para\ la\ negociación\ telnet.}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ EOR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})239,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ End\ Of\ Record.}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ WILL\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (char)251,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Acepta\ el\ protocolo?}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ WONT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})252,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Acepta\ el\ protocolo?}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ DO\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (char)253,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Protocolo\ aceptado.}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ DONT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})254,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Protocolo\ denegado.}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ SB\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (char)250,\ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ inicia\ secuencia\ de\ sub-\/negociación.}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ SE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})240,\ \ \textcolor{comment}{//\ Estando\ en\ la\ sub-\/negociación,\ fin\ de\ sub-\/negociación.}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Negociación\ de\ salida\ (cliente-\/>servidor)}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ TELOPT\_BINARY\ \ \ \ \ \ \ =\ (char)0,\ \ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ pide\ modo\ binario.}}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ TELOPT\_ECHO\ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})1,\ \ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ pide\ echo\ local.}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ TELOPT\_SGA\ \ \ \ \ \ \ \ \ \ =\ (char)2,\ \ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ pide\ Supress\ Go\ Ahead.}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ TELOPT\_EOR\ \ \ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})25,\ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ informa\ End\ Of\ Record.}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ TELOPT\_NAWS\ \ \ \ \ \ \ \ \ =\ (char)31,\ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Negotiate\ Abaut\ Window\ Size.}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ TELOPT\_TTYPE\ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})24\ \ \ \ \textcolor{comment}{//\ Estando\ en\ la\ negociación,\ Terminal\ Type.}}
\DoxyCodeLine{00069\ \ \ \ \ \};}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{enum}\ TelnetQualifiers}
\DoxyCodeLine{00071\ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ TELQUAL\_IS\ \ \ \ \ \ \ \ \ \ =\ (char)0,}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ TELQUAL\_SEND\ \ \ \ \ \ \ \ =\ (\textcolor{keywordtype}{char})1}
\DoxyCodeLine{00074\ \ \ \ \ \};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACWILL[2];}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACWONT[2];}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACDO[2];}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACDONT[2];}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACSB[2];}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ IACSE[2];}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \_sendCodeArray[2];}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \_arrCRLF[2];}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \_arrCR[2];}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ QSize\ m\_winSize;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tamaño\ de\ la\ pantalla\ en\ caracteres.}}
\DoxyCodeLine{00088\ \ \ \ \ QSize\ m\_oldWinSize;\ \ \ \ \ \ \ \textcolor{comment}{//\ Tamaño\ de\ la\ pantalla\ que\ se\ envió\ por\ última\ vez\ al\ server.\ Para\ no\ enviar\ el\ mismo\ dato.}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{enum}\ TelnetStateCodes\ m\_negotiationState;}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_receivedDX[256];\ \ \ \ \ \textcolor{comment}{//\ What\ IAC\ DO(NT)\ request\ do\ we\ have\ received\ already\ ?}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_receivedWX[256];\ \ \ \ \ \textcolor{comment}{//\ What\ IAC\ WILL/WONT\ request\ do\ we\ have\ received\ already\ ?}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_sentDX[256];\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ What\ IAC\ DO/DONT\ request\ do\ we\ have\ sent\ already\ ?}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_sentWX[256];\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ What\ IAC\ WILL/WONT\ request\ do\ we\ have\ sent\ already\ ?}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ resetProtocol();}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_buffIncoming[IncommingBufferSize];}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{char}\ m\_buffProcessed[IncommingBufferSize];}
\DoxyCodeLine{00098\ \ \ \ \ QByteArray\ m\_buffSB;}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_actualSB;}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ emitEndOfRecord()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ Q\_EMIT(endOfRecord());\ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{void}\ emitEchoLocal(\textcolor{keywordtype}{bool}\ bEcho)\ \ \ \ \ \ \{\ Q\_EMIT(echoLocal(bEcho));\ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{void}\ sendTelnetControl(\textcolor{keywordtype}{char}\ codigo);}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{void}\ handleSB(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{void}\ transpose(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *buf,\ \textcolor{keywordtype}{int}\ iLen);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{void}\ willsReply(\textcolor{keywordtype}{char}\ action,\ \textcolor{keywordtype}{char}\ reply);}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{void}\ wontsReply(\textcolor{keywordtype}{char}\ action,\ \textcolor{keywordtype}{char}\ reply);}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{void}\ doesReply(\textcolor{keywordtype}{char}\ action,\ \textcolor{keywordtype}{char}\ reply);}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{void}\ dontsReply(\textcolor{keywordtype}{char}\ action,\ \textcolor{keywordtype}{char}\ reply);}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{void}\ sendSB(\textcolor{keywordtype}{char}\ code,\ \textcolor{keywordtype}{char}\ *arr,\ \textcolor{keywordtype}{int}\ iLen);}
\DoxyCodeLine{00114\ \ \ \ \ qint64\ doTelnetInProtocol(qint64\ buffSize);}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classQTelnet}{QTelnet}}(QObject\ *parent\ =\ 0);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ connectToHost(\textcolor{keyword}{const}\ QString\ \&host,\ quint16\ port);}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{void}\ sendData(\textcolor{keyword}{const}\ QByteArray\ \&ba);}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{void}\ setCustomCRLF(\textcolor{keywordtype}{char}\ lf\ =\ 13,\ \textcolor{keywordtype}{char}\ cr\ =\ 10);}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{void}\ setCustomCR(\textcolor{keywordtype}{char}\ cr\ =\ 10,\ \textcolor{keywordtype}{char}\ cr2\ =\ 0);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{void}\ writeCustomCRLF();}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{void}\ writeCustomCR();}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{void}\ write(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ c);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{bool}\ isConnected()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{bool}\ testBinaryMode()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordtype}{void}\ setWindSize(QSize\ s)\ \ \ \{m\_winSize\ =\ s;\}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordtype}{void}\ sendWindowSize();}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ QString\ peerInfo()\textcolor{keyword}{const};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ signals:}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordtype}{void}\ newData(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *buff,\ \textcolor{keywordtype}{int}\ len);}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{void}\ endOfRecord();}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{void}\ echoLocal(\textcolor{keywordtype}{bool}\ echo);}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{void}\ error(QAbstractSocket::SocketError\ error);}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keyword}{private}\ slots:}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{void}\ socketError(QAbstractSocket::SocketError\ err);}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{void}\ onReadyRead();}
\DoxyCodeLine{00145\ \};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ QTELNET\_H}}

\end{DoxyCode}
